# This is for connection test purpose
# Two porter pods on windows nodes with a porter service.
apiVersion: v1
kind: Pod
metadata:
  name: node1-porter
  namespace: demo
  labels:
    app: porter
spec:
    containers:
    - name: porter
      image: calico/porter:latest
      ports:
      - containerPort: 80
      env: 
      - name: SERVE_PORT_80
        value: foo
      imagePullPolicy: IfNotPresent 
    # This is for Openshift
    securityContext:
      seLinuxOptions: {}
    nodeSelector:
      test.connection.windows.node: node1

---
apiVersion: v1
kind: Pod
metadata:
  name: node2-porter
  namespace: demo
  labels:
    app: porter
spec:
    containers:
    - name: porter
      image: calico/porter:latest
      ports:
      - containerPort: 80
      env: 
      - name: SERVE_PORT_80
        value: foo
      imagePullPolicy: IfNotPresent 
    # This is for Openshift
    securityContext:
      seLinuxOptions: {}
    nodeSelector:
      test.connection.windows.node: node2

---
apiVersion: v1
kind: Service
metadata:
  name: porter
  namespace: demo
  labels:
    app: porter
spec:
  ports:
  - port: 80
    targetPort: 80
  selector:
    app: porter
  type: NodePort
